{% extends "HR/EmployeeDashboard/EditEmployee.html" %}
{% load encryption_filters %}
 {% load static %} 
{% block content %}
<link href="{% static 'css/plugins/sweetalert/sweetalert.css' %}" rel="stylesheet">

<style>
    
    #ProfileImagePreview {
        border-radius: 50%;
        border: 2px solid #ddd;     
        margin-top: 10px;
        max-width: 150px; 
        height: 150px;    
        object-fit: cover; 
    }

</style>
<style>
    .card {
        border-radius: 5px;
        border: 1px solid #0000004f;
    }

    .card-header{
        margin-bottom: -20px !important;
    }

    .card .card-body {
        padding: 18px !important;
    }

.table-rounded {
    border-collapse: separate !important;
    border-spacing: 0;
    overflow: hidden;
    border-radius: 10px; /* your desired radius */
}

/* Round the header corners */
.table-rounded thead th:first-child {
    border-top-left-radius: 5px;
}

.table-rounded thead th:last-child {
    border-top-right-radius: 5px;
}

/* Round body bottom corners */
.table-rounded tbody tr:last-child td:first-child {
    border-bottom-left-radius: 5px;
}

.table-rounded tbody tr:last-child td:last-child {
    border-bottom-right-radius: 5px;
}


</style>





     <!-- Letter of Appointment -->
    
    <div class="card card-primary">
        <div class="card-header">
            <span class=" text-uppercase fw-bold"> Clearance From</span>  
            {% if ClearanceFromdatashow == 'Show'  %}
        
            <a href="{% url 'ClearanceFrom' %}?EC={{EC}}&EmpID={{EmpID}}&OID={{OrganizationID}}" class="btn btn-sm btn-primary" style="float:right">New  Clearance From </a>
            {% endif %}
        </div>
        <div class="card-body">
                {% comment %} <table class="table table-bordered table-condensed  display table-sm compact" style="font-size:11px"> {% endcomment %}
                <table class="table table-bordered table-sm table-rounded"  style="font-size:11px">
                    <thead>
                        <tr>
                            <th class="sr">SR#</th>
                            <th class="Name">Name</th>
                            <th class="Designation">Designation</th>
                            <th>separation Date</th>
                            <th>Finishing Time</th>
                            <th class="Action">Action</th>
                        </tr>
    
                    </thead>
                    <tbody>
                        {% for ClearanceFromdata in ClearanceFromdatas %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ ClearanceFromdata.Name }}</td>
                            <td>{{ ClearanceFromdata.Position }}</td>
                            <td>{{ ClearanceFromdata.SeparationDate|date:"d M. Y" }}</td>
                            <td>{{ ClearanceFromdata.FinishingTime }}</td>
                            <td style="width: 150px;">
                                <span>
                                    <a href="{% url 'ClearanceFrom' %}?ID={{ ClearanceFromdata.id }}&EC={{EC}}&EmpID={{EmpID}}&OID={{OrganizationID}}" class="btn btn-primary btn-sm edit-btn"  style="color: white; text-decoration: none; font-size: 12px;" title="Edit">Edit</a>
                                    {% comment %} <a onclick="return confirm('Are you sure you want to delete?')"
                                       href="{% url 'ClearancefromDelete' %}?ID={{ ClearanceFromdata.id }}&EC={{EC}}&EmpID={{EmpID}}&OID={{OrganizationID}}"
                                       class="btn btn-danger btn-sm"
                                       style="font-size: 12px; margin-right: 1px;">
                                       Delete
                                    </a> {% endcomment %}
                                    <a target="_blank" href="{% url 'ClearancePdf' %}?ID={{ ClearanceFromdata.id }}&EC={{EC}}&EmpID={{EmpID}}&OID={{OrganizationID}}" class="btn btn-secondary text-white btn-sm"  style="font-size: 12px;" title="View Clearance Form">View</a>
                                </span>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
    
                </table>
        </div>
    </div>
    
   
   
    

  


 
    
   
     



    <script>
        $(document).ready(function () {
            const urlParams = new URLSearchParams(window.location.search);
            const success = urlParams.get('Success');
            
            if (success === 'True') {
                showSuccess();
                removeSuccessParam();
            }
            if (success === 'Deleted') {
                showDelete();
                removeSuccessParam();
            }
            if (success === 'Uploaded') {
                showUploaded();
                removeSuccessParam();
            }
    
            function removeSuccessParam() {
                urlParams.delete('Success'); 
                const newUrl = window.location.pathname + '?' + urlParams.toString();
                window.history.replaceState(null, '', newUrl);
            }
        });
    </script>
    
    


{% endblock content %}





