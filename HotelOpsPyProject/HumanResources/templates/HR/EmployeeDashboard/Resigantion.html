{% extends "HR/EmployeeDashboard/EditEmployee.html" %}
 {% load static %} 
{% block content %}
<link href="{% static 'css/plugins/sweetalert/sweetalert.css' %}" rel="stylesheet">

<style>
    
    #ProfileImagePreview {
        border-radius: 50%;
        border: 2px solid #ddd;     
        margin-top: 10px;
        max-width: 150px; 
        height: 150px;    
        object-fit: cover; 
    }
    .card {
        border-radius: 5px;
        border: 1px solid #0000004f;
    }

    .card-header{
        margin-bottom: -20px !important;
    }

    .card .card-body {
        padding: 18px !important;
    }

</style>


<div class="card">
    <div class="card-header">
    <span class=" text-uppercase fw-bold">Resignation</span> 
        {% if Resigantionshow == 'Show'  %}
            
            <a href="{% url 'EmpResigantionEntry' %}?EC={{EC}}&EmpID={{EmpID}}&DepartmentName={{ Emobj.Department }}&OID={{OrganizationID}}" class="btn btn-sm btn-primary" style="float:right">New Resignation</a>
            {% endif %}
        </div>
        <div class="card-body">
                <table class="table table-bordered table-condensed  display table-sm compact" style="font-size:11px">
                    <thead>
                        <tr class="active" style="background-color:#8e9ebc">
                            <th class="EmpCode">Code</th>
                            <th class="Name">Name</th>
    
                            <th class="Designation">Desi / Dept</th>
                            {% comment %} <th class="Department">Department</th> {% endcomment %}
                            <th class="Date">Joining Date</th>

                            <th class="Date">Last Working Date</th>
                            <th class="Date">Date of Resignation</th>

                            <th class="">Notice Period</th>
                          
                            <th class="Action">Action</th>
                        </tr>
    
                    </thead>
                   
                      
                        <tbody>
                        {% for i in Resigantions %}
                            <tr>
                                <td>{{ i.Emp_Code }}</td>
                            <td>{{ i.Name }}</td>
                            <td>{{ i.Designation }} <br/> {{ i.Dept }}</td>
                            {% comment %} <td>{{ i.Dept }}</td> {% endcomment %}
                            <td>{{ i.DOJ|date:"d-m-Y"}}</td>
                            <td>{{ i.LastWorkingDays|date:"d-m-Y" }}</td>
                            <td>{{ i.Date_Of_res }}</td>

                            <td>{{ i.NoticePeriod }}</td>

                            <td>
                                <div class="btn btn-group gap-2">
                                    <a href="{% url 'EmpResigantionEntry' %}?RID={{ i.id }}&EC={{EC}}&EmpID={{EmpID}}&DepartmentName={{ Emobj.Department }}&OID={{OrganizationID}}" class="btn btn-primary btn-sm">Edit</a>
                                    {% comment %} <a href="{% url 'EmpResigantionDelete' %}?RID={{ i.id }}&EC={{EC}}&EmpID={{EmpID}}&OID={{OrganizationID}}" onclick="javascript:return confirm('Do you want to delete?')" class="btn btn-danger text-white btn-sm"><i class="fa fa-trash"></i></a> {% endcomment %}
                                    <a href="{% url 'EmpResigantionPDF' %}?RID={{ i.id }}&EC={{EC}}&EmpID={{EmpID}}&OID={{i.OrganizationID}}" class="btn btn-secondary text-white btn-sm" target="_blank">View</a>
                                    
                                </div>
                                

                            </td>
                            </tr>
                        {% endfor %}
                       
                    </tbody>
    
                </table>
        </div>
    </div>
    
   
<script>
    $(document).ready(function () {
        const urlParams = new URLSearchParams(window.location.search);
        const success = urlParams.get('Success');
        
        if (success === 'True') {
            showSuccess();
            removeSuccessParam();
        }
        if (success === 'Deleted') {
            showDelete();
            removeSuccessParam();
        }
        if (success === 'Uploaded') {
            showUploaded();
            removeSuccessParam();
        }

        function removeSuccessParam() {
            urlParams.delete('Success'); 
            const newUrl = window.location.pathname + '?' + urlParams.toString();
            window.history.replaceState(null, '', newUrl);
        }
    });
</script>



{% endblock content %}





