{% extends 'LMS/homebase.html' %}


{% comment %} {% extends 'EMP_PAY/homebase.html' %}
{% block content %}  {% endcomment %}

{% block title %} Employee Leave Report {% endblock %}

{% block content %}
<div class="container mt-4">
    <h2 class="text-center">Employee Leave Report</h2>

    <!-- Filter Form -->
    <form method="GET" class="mb-3">
        <div class="row">
            <div class="col-md-3">
                <label>Employee Code:</label>
                <input type="text" name="emp_code" class="form-control" placeholder="Enter Employee Code">
            </div>
            <div class="col-md-3">
                <label>Start Date:</label>
                <input type="date" name="start_date" class="form-control">
            </div>
            <div class="col-md-3">
                <label>End Date:</label>
                <input type="date" name="end_date" class="form-control">
            </div>
            <div class="col-md-3">
                <label>Leave Type:</label>
                <select name="leave_type" class="form-control">
                    <option value="">All</option>
                    <option value="CL">Casual Leave</option>
                    <option value="SL">Sick Leave</option>
                    <option value="AR">AR Leave</option>
                </select>
            </div>
        </div>
        <button type="submit" class="btn btn-primary mt-3">Filter</button>
    </form>

    <!-- Leave Report Table -->
    <table class="table table-bordered table-striped mt-3">
        <thead class="table-dark">
            <tr>
                <th>Employee Code</th>
                <th>Leave Type</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Days</th>
                <th>Status</th>
                <th>Reason</th>
                <th>Remark</th>
            </tr>
        </thead>
        <tbody>
            {% for leave in leaves %}
            <tr>
                <td>{{ leave.Emp_code }}</td>
                <td>{{ leave.Leave_Type_Master.Type }}</td>
                <td>{{ leave.Start_Date }}</td>
                <td>{{ leave.End_Date }}</td>
                <td>{{ leave.Total_credit }}</td>
                <td>
                    {% if leave.Status == 1 %} Approved
                    {% elif leave.Status == 0 %} Pending
                    {% else %} Rejected {% endif %}
                </td>
                <td>{{ leave.Reason }}</td>
                <td>{{ leave.Remark }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="8" class="text-center">No leave records found</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
