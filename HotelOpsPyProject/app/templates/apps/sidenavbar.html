<style>
      {% comment %} .sidebar{
          z-index: 0;
      } {% endcomment %}
      li.submenu.active > a{
        background:transparent !important;
        color:#fff;


      }
    {% comment %} .nav_l_h_s_m[data-cat="HR"], .nav_l_h_s_m[data-cat="Gen"] {
       flex-wrap: wrap !important;
       max-width: 860px !important;
       width: 1180% !important;
       left: -230px !important;

        display: block;
        min-width: 58rem;
        flex-wrap: wrap !important;
        left: -25rem !important;
   }

    .nav_l_h_s_m[data-cat="HR"] li, .nav_l_h_s_m[data-cat="Gen"] li {
        width: 33% !important; /* Two columns */
        box-sizing: border-box !important;
        padding: 4px 8px !important; /* Optional spacing */
    }  {% endcomment %}
     li.submenu.active  ul li > a{
        background:transparent !important;
        color:#909294 !important;
     }

  {% comment %} .page-wrapper {
      z-index: 0;
  }
  .sidebar{
      z-index: 1;
  } {% endcomment %}


  .header {
      background: #3a4a93 !important;
  }

  div#sidebar {
      background: #fff  !important;
  }

  div#sidebar span {
      color: #333 !important;
  }

  .card {
      border-radius: 0px;
  }

  .form-control, .btn {
      border-radius: 0px;
  }
  th.sorting, th,th.sorting_asc  {
      background: #edf0fb !important;
  }
  .btn-primary {
      background: #3a4a93;
      border-color: #3a4a93;
      transition: all 0.5s ease
  }

  .btn-primary:hover {
      background: #5464af;
      border-color: #3a4a93;

  }

  #nav_l_h_s_m_ho{
      display: flex;
      justify-content: center;
  }

  .NavActionButtons:hover i{
      color: #3a4a93  !important;
  }
</style>
<style>
                [data-layout="horizontal"] body .sidebar .sidebar-menu ul li a {
                  padding: 6px 7px;
                }
                [data-layout="horizontal"] body .sidebar .sidebar-menu ul.nav_l_h_s_m {
                  max-width: 220px ;
                  position: absolute;
                  top: 45px;
                  margin: 0 auto;
                  left: 0px ;
                  overflow-x: hidden;
                  width: max-content;
                  border:1px solid #cccecb;
                }

                [data-layout=horizontal] body .sidebar ul.nav_l_h_s_m li {
          width: 280px ;
      }

        [data-layout=horizontal] body .sidebar .sidebar-menu ul ul {
            background-color: #EFF2ED;
        }

        ul.nav_l_h_s_m {
            box-shadow: 0 0.1875rem 0.375rem rgba(var(--bs-black-rgb), 0.1);
        }

        .wds-dropdown:after {
            border: 8px solid transparent;
            border-bottom: 8px solid var(--wds-dropdown-background-color);
            margin-left: -8px;
        }



        .sidebar .sidebar-menu ul ul li a {
            color: #000000;
            position: relative;
        }
        .sidebar .sidebar-menu ul ul li a::before {
            background: #000000;
        }

                .sidebar .sidebar-menu ul ul li a::before {
                content: none !important;
              }


            
          .#nav_l_h_s_m li a {
            color:#fff;
          }


          {% comment %} [data-layout="horizontal"] body .sidebar .sidebar-menu ul.nav_l_h_s_m {
            max-width: 220px !important;
            position: absolute;
            top: 45px;
            left: 0px !important;
            overflow-x: hidden;
            width: max-content;
            border: 1px solid #cccecb;
            background-color: #EFF2ED;
            z-index: 999;
        } {% endcomment %}

        .nav_l_h_s_m::before {
          content: "";
          position: absolute;
          top: -8px;
          left: 40px; /* adjust this based on your dropdown alignment */
          margin-left: -8px;
          border-width: 0 8px 8px 8px;
          border-style: solid;
          border-color: transparent transparent #EFF2ED transparent;
          z-index: 999;
      }


      ul.nav_l_h_s_m li a:hover{
          background:#354696b3 !important;
        }

        [data-layout=horizontal] body .sidebar .sidebar-menu ul ul li a {
            padding: 10px 14px;
            width: 218px;
        }

        .sidebar .sidebar-menu ul ul {

            padding: 0px !important;
        }

        .nav_l_h_s_m::before {
          content: "";
          position: absolute;
          top: -8px;
          left: 32px;
          border-width: 0 8px 8px 8px;
          border-style: solid;
          border-color: transparent transparent #EFF2ED transparent;
          z-index: 999;
        }

        .submenu {
          position: relative;
          z-index: 1000;
        }

         .sidebar,
        .sidebar-menu,
        .sidebar .sidebar-menu ul,
        .sidebar .sidebar-menu ul.nav_l_h_s_m {
          overflow: visible !important;
        }

        .nav_l_h_s_m[data-cat="Admin"]{
          max-width: 90px !important;
        }
        .nav_l_h_s_m[data-cat="Admin"] li a{
          width: 90px !important;
        }

         #nav_l_h_s_m_ho li a span.active {
          color: #fff !important;
          background: #3a4a93 !important;
          padding: 3px 6px;
          border-radius: 5px;
          }


          ul.nav_l_h_s_m li:nth-child(1) {
                width: 0% !important;
                min-width:25% !important;
                margin: 0px 0px !important;
            }

         .nav_l_h_s_m[data-cat="Gen"] {    

           display: block;
    min-width: 60rem;
    flex-wrap: wrap !important;
    left: -30rem !important;
   }

 

        .nav_l_h_s_m[data-cat="Gen"] li {
           max-width: 25% !important; /* Two columns */
           box-sizing: border-box !important;
           padding: 0px 0px !important; /* Optional spacing */
       } 
       .nav_l_h_s_m[data-cat="Gen"]::before{
        left: 32rem !important;
       }
        

       .nav_l_h_s_m[data-cat="HR"] li {
           max-width: 22% !important; /* Two columns */
           box-sizing: border-box !important;
           padding: 0px 0px !important; /* Optional spacing */
       } 

         .nav_l_h_s_m[data-cat="HR"] {
                 display: block;
    min-width: 58rem;
    flex-wrap: wrap !important;
    left: -30rem !important;
   }

       ul.nav_l_h_s_m[data-cat="HR"] li:nth-child(1) {
                width: 0% !important;
                min-width:22% !important;
                margin: 0px 0px !important;
            }

       .nav_l_h_s_m[data-cat="HR"]::before{
        left: 32rem !important;
       }

  

.sidebar .sidebar-menu ul li a span, .two-col-bar .sidebar-menu ul li a span {

    margin-left: 7px;
   
}


        #nav_l_h_s_m_ho > li.submenu > a::after {
        content: "\f0da";
         {% comment %} content: "â–¼"; {% endcomment %}
        font-family: 'Font Awesome 5 Free';
        font-weight: 900;
        margin-right: 0px;
        color: #3a4a93; /* Customize color */
        {% comment %} transform: rotate(90deg); {% endcomment %}
        transition: transform 0.3s ease;
        display: inline-block;
    }

    #nav_l_h_s_m_ho > li.submenu.active > a::after {
        transform: rotate(90deg);
    }

     {% comment %} #nav_l_h_s_m_ho li a span{
                    border-bottom:1px solid black;
                } {% endcomment %}


.nav_l_h_s_m li{
    list-style: none !important;
    list-style-type: none !important;
}

.sidebar .sidebar-menu ul ul li a::before {
    content: "";
    width: 5px;
    height: 5px;
    border-radius: 10px;
    background: #A6A8A9;
    position: absolute;
    left: 10px;
    top: 50%;
    transform: translateY(-50%);
}
</style>

<script>
  var GRedURL = "{{ request.session.MasterURL }}";
  var ProductUserRightsList = "{{ request.session.ProductUserRightsList }}";
  var UserID = "{{request.session.UserID}}";

 // console.log("the gredurl is here::", GRedURL )
</script>
<script>
  $(function () {
    var CS_SearchDataSource = [];
    $(".nav_l_h_s_m").empty();
    $(".nav_l_h_s_m").append(
      '<li><form ><input class="form-control  top-custsearch" id="" type="text" placeholder="Search here"> </form></li>'
    );
    $.getJSON("/get_cached_data", function (data) {

      // console.log(data);
      data = data[0].ModuleList;
      data = JSON.parse(data);
      pl = data;
      const categories = [...new Set(data.map((item) => item.Category))];
      // console.log(categories);
      var c = [];
      //nav_l_h_s_m_ho

      $(categories).each(function (Index, itm) {
        $("#nav_l_h_s_m_ho").append(
          '<li class="submenu" data-m-t="' +
            itm +
            '"><a href = "#" class= "subdrop" ><span> ' +
            itm +
            '</span></a> <ul style="display: none;" class="nav_l_h_s_m" data-cat="' +
            itm +
            '"> </ul> </li > '
        );
      });

      var ddd = `  <li style="
    position: absolute;
    right: 0;
">
<a class="NavActionButtons" style="display: inline-block"><i class="fas fa-arrow-left" style="cursor: pointer;" onclick="window.history.back();"></i></a>
<a class="NavActionButtons" style="display: inline-block">
<i class="fas fa-sync-alt" style="cursor: pointer; display: inline-block" onclick="location.reload();"></i>
</a>
</li>`;
      $("#nav_l_h_s_m_ho").append(ddd);
      //$(pl).each(function (index, item) {
      //    var r = item.DomainURL;
      //    var it = { "name": item.ProductLabel, "id": "27", "type": "module", redURL: r };
      //    $(".nav_l_h_s_m").append('<li><a href="' + r + '">' + item.ProductLabel + '</a></li>');
      //    CS_SearchDataSource.push(it)
      //})

      var Cat = "";
      $(pl).each(function (index, item) {
        var r = GRedURL + item.DomainURL;
        // console.log("the value r is here", r)
        var c = item.Category;
        //if (Cat == "" || Cat != c) {

        //    //$(".nav_l_h_s_m[data-cat='" + c + "']").append('<li class="topnavCatli"><a href="' + r + '">' + c + '</a></li>');
        //    Cat = c;
        //}
        var it = {
          name: item.ProductLabel,
          id: "27",
          type: "module",
          redURL: r,
        };
        if (c == "" || c == null || c == undefined) {
          c = "CEO";
        }
        $(".nav_l_h_s_m[data-cat='" + c + "']").append(
          '<li><a href="' + r + '">' + item.ProductLabel + "</a></li>"
        );
        CS_SearchDataSource.push(it);
      });
      try {
        DoMenuActive();
      } catch (e) {}
      $(".top-search").typeahead({
        source: CS_SearchDataSource,
        updater: function (item) {
          // Call your function here

          if (item.type == "module") {
            window.location.href = item.redURL;
            showLoader();
          }
        },
      });

      // $(".top-search").typeahead({
      //   source: CS_SearchDataSource.map(item => item.name),
      //   updater: function (selectedName) {
      //     // Find the original object
      //     var selectedItem = CS_SearchDataSource.find(obj => obj.name === selectedName);
      //     if (selectedItem && selectedItem.type === "module") {
      //       window.location.href = selectedItem.redURL;
      //       showLoader();
      //     }
      //   }
      // });


      $(".top-custsearch").on("keyup", function () {
        let value = $(this).val().toLowerCase();

        $(this)
          .parent()
          .parent()
          .parent()
          .parent()
          .find(".nav_l_h_s_m li")
          .filter(function (index, item) {
            if (index > 0) {
              // Get the text from <a> inside the <li>
              let itemText = $(this).find("a").text().toLowerCase();

              if (value === "") {
                $(this).css("hide-important");
              } else {
                if (itemText.includes(value)) {
                  $(this).removeClass("hide-important");
                } else {
                  $(this).addClass("hide-important");
                }
              }
            }
          });
      });
      //$("#nav_l_h_s_m_ho>li").click(function () {
      //    $("#nav_l_h_s_m_ho>li ul").css('display','none')
      //    $(this).find("ul").toggle()

      //})
      $(document).on("click", "#nav_l_h_s_m_ho > li > a", function (e) {
        e.preventDefault();

        var $submenu = $(this).next(".nav_l_h_s_m");

        // Slide up all others
        $(".nav_l_h_s_m").not($submenu).slideUp();

        // Toggle the current
        $submenu.stop(true, true).slideToggle();
      });
    });
  });

  $(document).ready(function () {
    $(document).on("click", function (event) {
      // Check if the click target is *not* inside the sidebar
      if (!$(event.target).closest(".sidebar").length) {
        $(".nav_l_h_s_m").hide(); // Hide the dropdown
      }
    });
  });

  $(document).on("click", "#nav_l_h_s_m_ho li a span", function (e) {
    var isActive = $(this).hasClass("active");

    $("#nav_l_h_s_m_ho li a span").removeClass("active");

    if (!isActive) {
      $(this).addClass("active");
    }
  });
</script>

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-inner slimscroll">
    <div id="sidebar-menu" class="sidebar-menu">
      <nav class="greedys sidebar-horizantal">
        <ul
          class="list-inline-item list-unstyled links"
          id="nav_l_h_s_m_ho"
        ></ul>
      </nav>

      <ul class="sidebar-vertical">
        <li class="submenu">
          <a href="#"><i class="la la-dashcube"></i> <span> Modules</span> </a>
          <ul class="nav_l_h_s_m"></ul>
        </li>
      </ul>
    </div>
  </div>
</div>
<!-- /Sidebar -->

<!-- Two Col Sidebar -->
<div class="two-col-bar" id="two-col-bar">
  <div class="sidebar sidebar-twocol" id="navbar-nav">
    <div class="sidebar-left slimscroll">
      <div
        class="nav flex-column nav-pills"
        id="v-pills-tab"
        role="tablist"
        aria-orientation="vertical"
      >
        <a
          class="nav-link active"
          id="v-pills-dashboard-tab"
          title="Dashboard"
          data-bs-toggle="pill"
          href="#v-pills-dashboard"
          role="tab"
          aria-controls="v-pills-dashboard"
          aria-selected="true"
        >
          <span class="material-icons-outlined"> home </span>
        </a>
      </div>
    </div>

    <div class="sidebar-right">
      <div class="tab-content" id="v-pills-tabContent">
        <div
          class="tab-pane fade show active"
          id="v-pills-dashboard"
          role="tabpanel"
          aria-labelledby="v-pills-dashboard-tab"
        >
          <p>Modules</p>
          <ul class="nav_l_h_s_m"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- /Two Col Sidebar -->
