{% extends "Employee_Personal_Dashboard/homebase.html" %}
{% block content %}
{% load static %}

<style>
  .employee-dashboard-container {
    display: flex;
    gap: 20px;
    margin-top: 20px;
    flex-wrap: wrap;
    width: 100%;
  }


.employee-dashboard-container .card {
    width: 100%;
}

  .employee-welcome-card {
    flex: 0 0 40%;
    background-color: #f8f9fa;
    border-radius: 10px;
  }

  .employee-details {
    flex: 0 0 58%;
    background-color: #ffffff;
    border-radius: 10px;
    padding: 15px;
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
  }

  .welcome-info {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .Profile-Img {
    width: 50px;
    height: 50px;
    /* overflow: hidden; */
    flex-shrink: 0;
  }

  .Profile-Img img{
    width: 80px !important;
    height: 80px !important;
    object-fit: cover;
    border-radius: 50%;
  }

  .info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 15px;
    flex: 3;
  }

  .info-item {
    font-size: 14px;
  }

  .info-item span {
    font-weight: 600;
    display: block;
  }

  .dashboard-bottom-section {
    display: flex;
    gap: 20px;
    /* margin-top: 20px; */
    flex-wrap: wrap;
  }

  .AllLeaves-Container {
    flex: 0 0 20%;
  }

  .Calendar-Container {
    flex: 0 0 54%;
  }

  .LeaveAction-Container {
    flex: 0 0 23%;
  }



  @media (max-width: 768px) {
    .employee-welcome-card, .employee-details {
      flex: 0 0 100%;
    }

    .AllLeaves-Container,
    .Calendar-Container,
    .LeaveAction-Container {
      flex: 0 0 100%;
    }
  }

  /* all leaves */
  .card-bodyAllLeaves{
    padding: 0px 24px !important;
    /* border-bottom: 0.5px solid #222; */
  }

  .card-bodyAllLeaves div div{
    
  }


.page-wrapper .content {
    padding: 0px 24px !important;
}

.LeaveAction-Cards{
    display: flex;
    justify-content: space-between;
    gap: 10px;
    
}
.LeaveAction-Cards div {
    display: flex;
    flex-direction: column;
    text-align: center;
}

.LeaveAction-Cards div span:first-child{
    color: green;
}
.LeaveAction-Cards div:nth-child(2) span:first-child{
    color: red;
}
.LeaveAction-Cards div:nth-child(3) span:first-child{
    color: #958c7d;
}

/* profile image */
.profile-img-wrap {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.welcome-btn {
    margin-top: 10px;
}

.welcome-btn .btn {
    padding: 4px 12px;
    font-size: 14px;
    border-radius: 20px;
}

/* .profile-view .profile-img-wrap { */
    /* height: 200px; */
    /* width: 120px; */
    /* position: absolute; */
/* } */

.profile-view .profile-img-wrap img{
    border-radius: 50%;
    height: 80px;
    width: 80px;
}

#ViewProfile{
    background-color:rgb(74, 133, 197);
    border-color: rgb(74, 133, 197);;
}


/* Latest Notification */
.employee-notification-list{
    display: flex;
    flex-direction: column;
    gap: 5px;
    margin-top: 25px;
    max-height: 390px;
    overflow-y: scroll;
}


/* .LeaveAction-Cards{
    margin-top: ;
} */

 /* View Attendence */
 .view-attendance a {
    color: #373B3E;
    font-weight: 500;
    display: -webkit-inline-box;
    display: -ms-inline-flexbox;
    display: inline-flex;
    align-items: center;
    -webkit-box-align: center;
    -ms-flex-align: center;
}
</style>

<style>
  #calendar {
    max-width: 900px;
    height: 450px;
    margin: 0 auto;
  }

  .fc-daygrid-day-number {
    color: #3a4a93; /* Change to any color like red, blue, etc. */
    font-weight: bold;
  }

  /* Change date numbers in each cell */
.fc-daygrid-day-number {
    color: #3a4a93; /* black or any color */
    font-weight: bold;
}

/* Change month title (OCTOBER 2024) */
.fc-toolbar-title {
    font-size: 20px !important;
    color: #333;
    font-weight: 600;
}

/* Change weekday header colors (SUN, MON, etc.) */
.fc-col-header-cell-cushion {
    color: #3a4a93;
    font-weight: bold;
    font-size: 14px;
}

/* Optional: Style header buttons */
.fc-button {
    background-color: #007bff;
    color: #fff;
    border: none;
    padding: 5px 10px;
    font-size: 13px !important;
}

.fc-button:hover {
    background-color: #0056b3;
}

</style>

<div class="employee-dashboard-container">
    <div class="card">
        <div class="card-body">
            <div class="row">
                <div class="col-sm-12">
                    <div class="profile-view">
                        <div class="profile-img-wrap">
                            <div class="profile-img">
                                <a href="#">
                                    {% if Emobj.ProfileImageFileName %}
                                        <!-- <img id="ProfileImagePreviewedit" src="{% url 'Humanview_file' %}?ID={{ Emobj.EmpID }}&model=EmployeePersonalDetails" alt="Profile Image Preview" style="width: 100%; height: auto;">  -->
                                        <img id="" src="/static/Images/avatarimg.webp" alt="Profile Image Preview">
                                    {% else %}
                                        <img id="" src="{% static 'Images/avatarimg.webp' %}" alt="Profile Image Preview"> 
                                        <!-- <img id="" src="/static/Images/avatarimg.webp" alt="Profile Image Preview">  -->
                                    {% endif %}
                                </a>
                                <a href="profile.html" class="btn btn-sm btn-primary mt-2 rounded-2" id="ViewProfile">View Profile</a>
                            </div>
                        </div>
                        <div class="profile-basic">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="profile-info-left">
                                        <h3 class="user-name m-t-0 mb-0">{{ Emobj.FirstName }} {{Emobj.MiddleName }} {{ Emobj.LastName }}</h3>
                                        <ul class="personal-info mt-2">
                                            <li>
                                                <div class="title">Designation:</div>
                                                <div class="text">{{Emobj.Designation}} ({{ Emobj.Level }})
                                                </div>
                                            </li>
                                            <li>
                                                <div class="title">Department:</div>
                                                <div class="text">{{Emobj.Department}}</div>
                                            </li>
                                            <li>
                                                <div class="title">Reports to:</div>
                                                <div class="text">{{Emobj.ReportingtoDesignation}}</div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <ul class="personal-info" style="border-right: 2px dashed #D3D3D4;">
                                        <li>
                                            <div class="title">Code:</div>
                                            <div class="text">{{ Emobj.EmployeeCode }}</div>
                                        </li>
                                        <li class="d-flex align-items-center">
                                            <div class="title">Status:</div>
                                            <div class="text">{{ Emobj.EmpStatus }}</div>
                                        </li>
                                        <li>
                                            <div class="title">DOJ:</div>
                                            <div class="text">{{ Emobj.DateofJoining|date:'j F Y' }}</div>
                                        </li>
                                        <li>
                                            <div class="title">Tenure:</div>
                                            <div class="text">{{ Emobj.TenureTillToday }}</div>
                                        </li>
                                    </ul>
                                </div>
                                <div class="col-md-4">
                                    <ul class="personal-info">
                                    <li>
                                        <div class="title">Phone:</div>
                                        <div class="text"><a href="#">{{Emobj.MobileNumber}}</a></div>
                                    </li>
                                    <li>
                                        <div class="title">Email:</div>
                                        <div class="text"><a href="#">{{ Emobj.EmailAddress }}</a></div>
                                    </li>
                                    <li>
                                        <div class="title">Birthday:</div>
                                        <div class="text">{{ Emobj.DateofBirth|date:'j F' }}</div>
                                    </li>

                                    <li>
                                        <div class="title">Gender:</div>
                                        <div class="text">{{ Emobj.Gender }}</div>
                                    </li>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="dashboard-bottom-section border-bottom">
  <div class="card AllLeaves-Container border-bottom">
      <div class="card-header border-bottom"><span class="card-title fw-bold fs-5">All Leaves</span></div>
      <!-- <hr> -->
    <div class="card-body card-bodyAllLeaves mt-2">
      <div>
        {% for leave_Details in leave_balance  %}
            <div class="d-flex justify-content-between border-bottom p-1 pt-2">
                <p>{{leave_Details.Leave_Type_Master.Type}}</p>
                <p>{{leave_Details.Balance}}</p>
            </div>
        {% endfor %}
      </div>
    </div>
    <div class="Card-footer p-3 view-attendance">
          <a href="{% url "Leave_Application" %}">
              Apply Leave <i class="fas fa-arrow-circle-right"></i>
          </a>
      </div>
  </div>

  <div class="card Calendar-Container">
     <div class="card-header border-bottom"><span class="card-title fw-bold fs-5">Attendance</span></div>
    <div class="card-body">
       <div id="calendar"></div>
      <!-- Your calendar or upcoming events go here -->
    </div>
  </div>

  <div class="card LeaveAction-Container">
    <div class="card-header border-bottom"><span class="card-title fw-bold fs-5">Leave Alerts</span></div>
    <!-- <div class="card-header border-bottom"><span class="card-title fw-bold fs-5">Leave Summary</span></div> -->
    <div class="card-body">
      <!-- <h4>Leave Actions</h4> -->
      <!-- Apply Leave, View History, etc. -->
       <div class="LeaveAction-Cards">
        <div>
            <span>{{leave_requset_appr_count}}</span>
            <span>Approved</span>
        </div>
        <div>
            <span>{{leave_requset_Pending_count}}</span>
            <span>Pending</span>
        </div>
        <div>
            <span>{{leave_requset_rejected_count}}</span>
            <span>Rejected</span>
        </div>
       </div>
       <!-- <div class="TopLatest"> -->
        <div class="">
            <div class="tab-pane active" id="notification_tab" role="tabpanel">
                <div class="employee-noti-content">
                    <ul class="employee-notification-list">
                        {% for Leave_Item in Selected_Leave_Application %}
                            <li class="employee-notification-grid">
                                <div class="employee-notification-icon">
                                    <!-- <a href="activities.html"> -->
                                    <a>
                                        <span class="badge-soft-danger rounded-circle">{{ Leave_Item.Leave_Type_Master.Type }}</span>
                                    </a>
                                </div>
                                <div class="employee-notification-content">
                                    <h6>
                                        <!-- <a href="activities.html"> -->
                                        <a>
                                            Your {{ Leave_Item.Leave_Type_Master.Type }} Request
                                            {% if Leave_Item.Status == 0 %}
                                                Is Pending
                                            {% elif Leave_Item.Status == 1 %}
                                                Is Approved
                                            {% elif Leave_Item.Status == -1 %}
                                                Is Rejected
                                            {% else %}
                                                has Unknown Status
                                            {% endif %}
                                        </a>
                                    </h6>
                                    <ul class="nav">
                                        <li>{{ Leave_Item.Start_Date }}</li>
                                        <li>{{ Leave_Item.End_Date }}</li>
                                    </ul>
                                </div>
                            </li>
                        {% endfor %}

                        <!-- Other Elements -->
                         <!-- <li class="employee-notification-grid">
                            <div class="employee-notification-icon">
                                <a href="activities.html">
                                    <span class="badge-soft-danger rounded-circle">CL</span>
                                </a>
                            </div>
                            <div class="employee-notification-content">
                                <h6>
                                    <a href="activities.html">
                                        Your CL leave
                                    </a>
                                </h6>
                                <ul class="nav">
                                    <li>02:10 PM</li>
                                    <li>21 Apr 2024</li>
                                </ul>
                            </div>
                        </li>  -->
 
                    </div>
                </div>
            </div>
       </div>
    <!-- </div> -->
  </div>
</div>




<!-- FullCalendar CSS -->
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet" />

<!-- FullCalendar JS -->
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>


<script>
  document.addEventListener('DOMContentLoaded', function () {
    var calendarEl = document.getElementById('calendar');

    var calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      events: [
        {% comment %} {
          // normal foreground event
          title: 'Meeting',
          start: '2025-06-14',
          end: '2025-06-15',
        }, {% endcomment %}
        {
          // background event
          start: '2025-06-18',
          end: '2025-06-21',
          display: 'background',
          backgroundColor: '#ff9f89'
        },
        {
          // recurring background event every Monday
          daysOfWeek: [1], // Monday
          startTime: '09:00',
          endTime: '17:00',
          display: 'background',
          backgroundColor: '#d2f8d2'
        }
      ]
    });

    calendar.render();
  });
</script>


{% endblock content %}

{% comment %} <div class="employee-dashboard-container">
    <div class="card">
        <div class="card-body">
            <div class="row">
                <div class="col-sm-12">
                    <div class="profile-view">
                        <div class="profile-img-wrap" style="text-align: center;">
                            <div class="profile-img">
                                <a href="#">
                                    <img src="/static/Images/avatarimg.webp" alt="Profile Image Preview">
                                </a>
                                <a href="profile.html" class="btn btn-sm btn-primary mt-2 rounded-2" id="ViewProfile">View Profile</a>
                            </div>
                            <!-- <div class="welcome-btn mt-2"> -->
                                <!-- <a href="profile.html" class="btn btn-sm btn-primary">View Profile</a> -->
                            <!-- </div> -->
                        </div>
                        <div class="profile-basic">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="profile-info-left">
                                        <h3 class="user-name m-t-0 mb-0">Kishor  Singh</h3>
                                        <ul class="personal-info mt-2">
                                            <li>
                                                <div class="title">Designation:</div>
                                                <div class="text">Housekeeping Associate (A)
                                                </div>
                                            </li>
                                            <li>
                                                <div class="title">Department:</div>
                                                <div class="text">Housekeeping</div>
                                            </li>
                                            <li>
                                                <div class="title">Reports to:</div>
                                                <div class="text">Housekeeping Manager</div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <ul class="personal-info" style="border-right: 2px dashed #D3D3D4;">
                                        <li>
                                            <div class="title">Code:</div>
                                            <div class="text">451000404</div>
                                        </li>
                                        <li class="d-flex align-items-center">
                                            <div class="title">Status:</div>
                                            <div class="text">Confirmed</div>
                                        </li>
                                        <li>
                                            <div class="title">DOJ:</div>
                                            <div class="text">1 March 2025</div>
                                        </li>
                                        <li>
                                            <div class="title">Tenure:</div>
                                            <div class="text">3 months, 12 days</div>
                                        </li>
                                    </ul>
                                </div>
                                <div class="col-md-4">
                                    <ul class="personal-info">
                                        <li>
                                            <div class="title">Phone:</div>
                                            <div class="text"><a href="#">6376871202</a></div>
                                        </li>
                                        <li>
                                            <div class="title">Email:</div>
                                            <div class="text"><a href="#">rjputkishorsingh46@gmail.com</a></div>
                                        </li>
                                        <li>
                                            <div class="title">Birthday:</div>
                                            <div class="text">13 December</div>
                                        </li>

                                        <li>
                                            <div class="title">Gender:</div>
                                            <div class="text">Male</div>
                                        </li>
                                </ul></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> {% endcomment %}