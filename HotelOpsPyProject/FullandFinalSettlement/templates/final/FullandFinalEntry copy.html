{% extends 'final/homebase.html' %}
{% load static %}

{% block content %}

        <form action="" method="post" id="FullandFinalSettlement">
            <!-- <div class="card">
                <div class="card-header">
                        <h4 class="text-uppercase fw-bold">Employee Details</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="employeeCode">Employee Code</label>
                                <input type="text" required class="form-control" name="Emp_Code" id="employeeCode" value="{{ Fobj.Emp_Code }}" readonly>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3"> 
                                <label for="employeeName">Employee Name</label>
                                <input type="text" class="form-control" name="Name" id="employeeName" value="{{ Fobj.Name }}" required readonly> 
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="joiningDate">Date of Joining</label>
                                <input type="date" class="form-control" name="DOJ" id="joiningDate" value="{{ Fobj.DOJ|date:'Y-m-d' }}" required readonly> 
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="LeavingDate">Date of Leaving</label>
                                <input type="date" class="form-control" name="Date_Of_Leaving" id="LeavingDate" value="{{ LastWorkingDaysDate|date:'Y-m-d' }}" required> 
                            </div>
                        </div>
                       
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="designation">Designation</label>
                                <input type="text" class="form-control" name="Designation" id="designation" value="{{ Fobj.Designation }}" required readonly> 
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="department">Department</label>
                                <input type="text" class="form-control" name="Dept" id="department" value="{{ Fobj.Dept }}" required readonly> 
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="absconding">Absconding</label>
                                <select name="Absconding" id="absconding" class="form-control" required>
                                    <option value="No" {% if Fobj.Absconding == "No" %}selected{% endif %}>No</option>
                                    <option value="Yes" {% if Fobj.Absconding == "Yes" %}selected{% endif %}>Yes</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="resignation">Resignation</label>
                                <select name="Resignation" id="resignation" class="form-control" required>
                                    <option value="No" {% if Fobj.Resignation == "No" %}selected{% endif %}>No</option>
                                    <option value="Yes" {% if Fobj.Resignation == "Yes" %}selected{% endif %}>Yes</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="NoticeDaysServed">Notice Days Served</label>
                                <select name="Notice_Days_Served" id="NoticeDaysServed" class="form-control" required>
                                    <option value="No" {% if Fobj.Notice_Days_Served == "No" %}selected{% endif %}>No</option>
                                    <option value="Yes" {% if Fobj.Notice_Days_Served == "Yes" %}selected{% endif %}>Yes</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="deductionFromSalary">Deduction from salary PL</label>
                                <select name="Deduction_from_salary_PL" id="deductionFromSalary" class="form-control" required>
                                    <option value="No" {% if Fobj.Deduction_from_salary_PL == "No" %}selected{% endif %}>No</option>
                                    <option value="Yes" {% if Fobj.Deduction_from_salary_PL == "Yes" %}selected{% endif %}>Yes</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="confirmed">Confirmed</label>
                                <select name="Confirmed" id="confirmed" class="form-control" required>
                                    <option value="No" {% if Fobj.Confirmed == "No" %}selected{% endif %}>No</option>
                                    <option value="Yes" {% if Fobj.Confirmed == "Yes" %}selected{% endif %}>Yes</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="currentSalary">Current Salary</label>
                                <input type="number" class="form-control" name="Current_Salary" id="currentSalary" value="{{ Fobj.Current_Salary }}" required>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="terminated">Terminated</label>
                                <select name="Terminated" id="terminated" class="form-control" required>
                                    <option value="No" {% if Fobj.Terminated == "No" %}selected{% endif %}>No</option>
                                    <option value="Yes" {% if Fobj.Terminated == "Yes" %}selected{% endif %}>Yes</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="laidOff">Laid Off</label>
                                <select name="Laid_Off" id="laidOff" class="form-control" required>
                                    <option value="No" {% if Fobj.Laid_Off == "No" %}selected{% endif %}>No</option>
                                    <option value="Yes" {% if Fobj.Laid_Off == "Yes" %}selected{% endif %}>Yes</option>
                                    <option value="Na" {% if Fobj.Laid_Off == "Na" %}selected{% endif %}>NA</option>
                                    <option value="Transfer" {% if Fobj.Laid_Off == "Transfer" %}selected{% endif %}>Transfer</option>
                                </select>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="BasicSalary">Basic Salary</label>
                                <input type="number" class="form-control" name="PL_Basic_Salary" id="BasicSalary" value="{{ BasicSalary }}" readonly>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="Gross">Gross</label>
                                <input type="number" class="form-control" name="NPP_Gross" id="Gross" value="{{ GrossSalary }}" readonly>
                            </div>
                        </div>
                    </div>
                </div>
            </div> -->

            <div class="card">
                <div class="card-body">

                    <!-- Leave Summary -->
                    <!-- <div class="row">
                        <div class="text-uppercase fw-bold">Leave Summary</div>
                        
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="period">From</label>
                                <input type="date" class="form-control" name="LS_Period" id="ToDate" value="{% if Fobj.LS_Period  %}{{Fobj.LS_Period|date:'Y-m-d'}}{% else %}{% now "Y-m-d" %}{% endif %}" required>
                                 <input type="date" class="form-control" name="LS_Period" id="FromDate" value="{{ DateOfJoining|date:'Y-m-d' }}" >
                                 {% comment %} <input type="date" class="form-control" name="LS_Period" id="FromDate" value="{% if Fobj.LS_Period  %}{{Fobj.LS_Period|date:'Y-m-d'}}{% else %}{% now "Y-m-d" %}{% endif %}" readonly> {% endcomment %}
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="period">To</label>
                                <input type="date" class="form-control" name="LS_Period" id="Toperiod" value="{{ To_Date }}" required>
                                {% comment %} <input type="date" class="form-control" name="To_Date" id="ToDate" value="{{ LastWorkingDaysDate|default:"{% now "Y-m-d" %}"|date:'Y-m-d'  }}" readonly> {% endcomment %}
                                <input type="date" class="form-control" name="To_Date" id="ToDate" value="{{ LastWorkingDaysDate|date:'Y-m-d' }}" >
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="OpeningBalance">Opening Balance</label>
                                <input type="number" class="form-control" name="LS_Opening_Balance" id="OpeningBalance" value="{{ OpeningBalance }}" >
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="leaveEarned">Leave Earned</label>
                                <input type="number" class="form-control" name="LS_Leaved_Earned" id="leaveEarned" value="{{ leave_earned }}" >
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="leaveAvailed">Leave Availed</label>
                                <input type="number" class="form-control" name="LS_Leaved_Availed" id="leaveAvailed" value="{{ total_credit }}" >
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="plBal">PL Balance</label>
                                <input type="number" class="form-control" name="LS_PL_Bal" id="plBal" value="{{ LeaveBalance }}" >
                            </div>
                        </div>
                        {% comment %} <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="plBal">PL Every Month Credit</label>
                                <input type="number" class="form-control" name="LS_PL_Bal" id="plBal" value="{{ PL_Every_Month_Credit }}" required>
                            </div>
                        </div> {% endcomment %}

                    </div> -->


                    <!-- PL PAYMENT -->
                    <div class="row">
                        <div class="mt-4 text-uppercase fw-bold">PL PAYMENT</div>

                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="TotalPL">Total PL</label>
                                <input type="number" class="form-control" name="PL_Total_PL" id="TotalPL"  value="{{ OpeningBalance }}"> 
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="PlRate">Rate</label>
                                <input type="number" class="form-control" name="PL_Rate" id="PlRate" value="{{ PLPaymentRateCeil }}">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="PLAmount">Amount</label>
                                <input type="number" class="form-control" name="PL_Amount" id="PLAmount" value="{{ PLPaymentAmount }}">
                            </div>
                        </div>
                    </div>


                    <!-- NOTICE PERIOD PAY -->
                    <div class="row">
                        <div class="mt-4 text-uppercase fw-bold">NOTICE PERIOD PAY</div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="TotalNoticePayDays">Total Notice Pay Days</label>
                                <input type="number" class="form-control" name="NPP_Total_Notice_Pay_Days" id="TotalNoticePayDays" value="{{ NoticePeriodDays }}"> 
                            </div>
                        </div>
                        {% comment %} <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="Gross">Gross</label>
                                <input type="number" class="form-control" name="NPP_Gross" id="Gross" value="{{ Fobj.NPP_Gross }}">
                            </div>
                        </div> {% endcomment %}
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="NPPRate">Rate</label>
                                <input type="number" class="form-control" name="NPP_Rate" id="NPPRate" value="{{ NoticePeriodPayRate }}">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="NPPAmount">Amount</label>
                                <input type="number" class="form-control" name="NPP_Net_Amount_Paid" id="NPPAmount" value="{{ NoticePeriodPayAmount }}">
                            </div>
                        </div>
                    </div>
                    
                    <!-- LEAVE TRAVEL ENTITLEMENT -->
                    <div class="row">
                        <div class="mt-4 text-uppercase fw-bold">LEAVE TRAVEL ENTITLEMENT</div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="TOTALMONTHSWORKED">TOTAL MONTHS WORKED</label>
                                <input type="number" class="form-control" name="TOTALMONTHSWORKED" id="TOTALMONTHSWORKED" value="" > 
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="LTARATE">LTA RATE</label>
                                <input type="number" class="form-control" name="LTARATE" id="LTARATE" value="" >
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="TOTALDAYSWORKED">TOTAL DAYS WORKED</label>
                                <input type="number" class="form-control" name="TOTALDAYSWORKED" id="TOTALDAYSWORKED" value="" required>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="PRORATABASISPAYMENT">PRO RATA BASIS PAYMENT</label>
                                <input type="number" class="form-control" name="PRORATABASISPAYMENT" id="PRORATABASISPAYMENT" value="" required>
                            </div>
                        </div>
                    </div>
                    
                    <!-- GRATUITY PAYMENT -->
                    <div class="row">
                        <div class="mt-4 text-uppercase fw-bold">GRATUITY PAYMENT</div>

                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="NoOfYears">No Of Years</label>
                                <input type="number" class="form-control" name="GP_No_Of_Years" id="NoOfYears" value="{{ TenureYears }}" required> 
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="LastBasics">Last Basics</label>
                                <input type="number" class="form-control" name="GP_Last_Basics" id="LastBasics" value="{{ BasicSalary }}" required>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="GraturityPayments">Graturity Payments</label>
                                <input type="number" class="form-control" name="GP_Graturity_Payments" id="GraturityPayments" value="{{ GraturityPayments }}" required>
                            </div>
                        </div>
                    </div>
                    

                    <!-- Bank Details -->
                    <div class="row">
                        <div class="mt-4 text-uppercase fw-bold">Bank Details</div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="BankName">Bank Name</label>
                                <input type="text" class="form-control" name="BankName" id="BankName" value="{{BankName}}" >
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="BranchName">Branch Name</label>
                                <input type="text" class="form-control" name="BranchName" id="BranchName" value="{{BankBranch}}" >
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="AccountsNumber">Accounts Number</label>
                                <input type="text" class="form-control" name="AccountsNumber" id="AccountsNumber" value="{{BankAccountNumber}}" > 
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="IFSCCode">IFSC Code</label>
                                <input type="text" class="form-control" name="IFSCCode" id="IFSCCode" value="{{BankIFSCCode}}" >
                            </div>
                        </div>
                    </div>

                    <!-- FULL AND FINAL PAYMENT SUMMARY -->
                    <div class="row">
                        <div class="mt-4 text-uppercase fw-bold">FULL AND FINAL PAYMENT SUMMARY</div>

                        <!-- <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="LTA">LTA</label>
                                <input type="number" class="form-control" name="LTA" id="LTA"> 
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="LTARemarks">Remarks</label>
                                <input type="text" class="form-control" name="LTARemarks" id="LTARemarks" title="Remarks For LTA"> 
                            </div>
                        </div> -->
                        <!-- <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="PendingSalary">Pending Salary</label>
                                <input type="number" class="form-control" name="FFPS_Pending_Salary" id="PendingSalary" value="{{ Fobj.FFPS_Pending_Salary }}"> 
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="PendingSalaryRemarks">Remarks</label>
                                <input type="text" class="form-control" name="PendingSalaryRemarks" id="PendingSalaryRemarks" title="Remarks For Pending Salary"> 
                            </div>
                        </div> -->
                        <!-- <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="PL">PL Payment</label>
                                <input type="number" class="form-control" name="FFPS_PL" id="PL" value="{{ PLPaymentAmount }}">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="PLPaymentRemarks">Remarks</label>
                                <input type="text" class="form-control" name="PLPaymentRemarks" id="PLPaymentRemarks" title="Remarks For PL Payment"> 
                            </div>
                        </div> -->
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="Gratuity">Gratuity</label>
                                <input type="number" class="form-control" name="FFPS_Gratuity" id="Gratuity" value="{{ GraturityPayments }}">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="GratuityRemarks">Remarks</label>
                                <input type="text" class="form-control" name="GratuityRemarks" id="GratuityRemarks" title="Remarks For Gratuity"> 
                            </div>
                        </div>
                        <!-- <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="TOTALEARNING">TOTAL EARNING</label>
                                <input type="number" class="form-control" name="TOTALEARNING" id="TOTALEARNING" value="{{ TOTALEARNINGAmount }}">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="TOTALEARNINGRemarks">Remarks</label>
                                <input type="text" class="form-control" name="TOTALEARNINGRemarks" id="TOTALEARNINGRemarks" title="Remarks For TOTAL EARNING"> 
                            </div>
                        </div> -->
                        <!-- <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="GrandTotal">Grand Total</label>
                                <input type="number" class="form-control" name="FFPS_Grand_Total" id="GrandTotal" value="{{ Fobj.FFPS_Grand_Total }}">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="GrandTotalRemarks">Remarks</label>
                                <input type="text" class="form-control" name="GrandTotalRemarks" id="GrandTotalRemarks" title="Remarks For Grand Total"> 
                            </div>
                        </div> -->
                        <!-- <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="Deductions">Deductions</label>
                                <input type="number" class="form-control" name="FFPS_Deductions" id="Deductions" value="">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="DeductionsRemarks">Remarks</label>
                                <input type="text" class="form-control" name="DeductionsRemarks" id="DeductionsRemarks" title="Remarks For Deductions"> 
                            </div>
                        </div> -->
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="FandFStatus">F and F Status</label>
                                <select name="FinalStatus" id="FandFStatus" class="form-control" required>
                                    <option value="" >Select</option>
                                    <option value="Pending" {% if Fobj.FinalStatus == "Pending" %}selected{% endif %}>Pending</option>
                                    <option value="Approved" {% if Fobj.FinalStatus == "Approved" %}selected{% endif %}>Approved</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="FandFStatusRemarks">Remarks</label>
                                <input type="text" class="form-control" name="FandFStatusRemarks" id="FandFStatusRemarks" title="Remarks For F and F Status"> 
                            </div>
                        </div>
                        <!-- <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="UniformDeductions">Uniform Deductions</label>
                                <input type="number" class="form-control" name="FFPS_Uniform_Deductions" id="UniformDeductions" value="{{ UniformDeductions }}">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="UniformDeductionsRemarks">Remarks</label>
                                <input type="text" class="form-control" name="UniformDeductionsRemarks" id="UniformDeductionsRemarks" title="Remarks For Uniform Deductions"> 
                            </div>
                        </div> -->
                        <!-- <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="NOTICEPERIODDeductions">NOTICE PERIOD</label>
                                <input type="number" class="form-control" name="NOTICEPERIODDeductions" id="NOTICEPERIODDeductions" value="{{ NoticePeriodPayAmount}}">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="NOTICEPERIODDeductionsRemarks">Remarks</label>
                                <input type="text" class="form-control" name="NOTICEPERIODDeductionsRemarks" id="NOTICEPERIODDeductionsRemarks" title="Remarks For NOTICE PERIOD"> 
                            </div>
                        </div> -->
                        <!-- <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="TotalDeductions">Total Deductions</label>
                                <input type="number" class="form-control" name="TotalDeductions" id="TotalDeductions" value="{{TotalDeductions}}">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="TotalDeductionsRemarks">Remarks</label>
                                <input type="text" class="form-control" name="TotalDeductionsRemarks" id="TotalDeductionsRemarks" title="Remarks For Total Deductions"> 
                            </div>
                        </div> -->
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="AuditedBy">Audited By</label>
                                <select name="AuditedBy" id="AuditedBy" class="form-control" required>
                                    <option value="" >Select</option>
                                    <option value="Auditor" {% if Fobj.AuditedBy == "Auditor" %}selected{% endif %}>Auditor</option>
                                    <option value="Finance" {% if Fobj.AuditedBy == "Finance" %}selected{% endif %}>Finance</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="AuditedByRemarks">Remarks</label>
                                <input type="text" class="form-control" name="AuditedByRemarks" id="AuditedByRemarks" title="Remarks For Audited By"> 
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="PayableAmount">Payable Amount</label>
                                <input type="number" class="form-control" name="FFPS_Payable_Amount" id="PayableAmount" value="{{ PayableAmount }}">
                                {% comment %} <input type="number" class="form-control" name="FFPS_Payable_Amount" id="PayableAmount" value="{{ Fobj.FFPS_Payable_Amount }}"> {% endcomment %}
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="PayableAmountRemarks">Remarks</label>
                                <input type="text" class="form-control" name="PayableAmountRemarks" id="PayableAmountRemarks" title="Remarks For Payable Amount"> 
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="PaymentStatus">Payment Status</label>
                                <select name="PaymentStatus" id="PaymentStatus" class="form-control" required>
                                    <option value="" >Select</option>
                                    <option value="Pending" {% if Fobj.PaymentStatus == "Pending" %}selected{% endif %}>Pending</option>
                                    <option value="Approved" {% if Fobj.PaymentStatus == "Approved" %}selected{% endif %}>Approved</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="PaymentStatusRemarks">Remarks</label>
                                <input type="text" class="form-control" name="PaymentStatusRemarks" id="PaymentStatusRemarks" title="Remarks For Payment Status"> 
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="FinalPayableAmount">Final Payable Amount</label>
                                <input type="number" class="form-control" name="FFPS_Payable_Amount" id="PayableAmount" value="{{ FinalPayableAmount }}">
                                {% comment %} <input type="number" class="form-control" name="FinalPayableAmount" id="FinalPayableAmount" value="{{ FinalPayableAmount }}"> {% endcomment %}
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group m-3">
                                <label for="FinalPayableAmountRemarks">Remarks</label>
                                <input type="text" class="form-control" name="FinalPayableAmountRemarks" id="FinalPayableAmountRemarks" title="Remarks For Final Payable Amount"> 
                            </div>
                        </div>
                    </div>
                </div>

                <div class="m-3 ms-5">
                    {% csrf_token %}
                    <input type="submit" class="btn btn-primary">
                </div>
            </div>
        </form>       


<!-- <div class="card">
    <table class="table ">
                    <thead>
                      
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="13" class="HeaderWithColor"><strong>General</strong></td>
                        </tr>
                        
                            <tr>
                                <td colspan="13" style="background-color: #6a6162; color: #fff; text-transform: uppercase;"><strong> All<strong></strong></strong></td>
                            </tr>
                            <tr>
                                <th class="TableThColor">DIV</th>
                                <th class="TableThColor">DEPT</th>
                                <th class="TableThColor">POSITION</th>
                            </tr>
                            
                        
                            
                            <tr data-division="General" data-department="All" data-designation="Laundry Associate (Valet)">
                                <td>Con 
                                    <input type="hidden" name="designation_ID_0" value="14">
                                </td>
                                <td>Con
                                    <input type="hidden" name="designation_ID_0" value="14">
                                </td>
                                <td style="width: 310px;">Laundry Associate (Valet) 
                                    <input type="hidden" name="designation_ID_0" value="14">
                                </td>
                                <td><input type="text" value="" style="width: 50px;" class="form-control input-small" readonly=""></td>
                                <td style="width: 120px; text-align: center; vertical-align: middle;">
                                    <input type="text" id="salaryAvrege_0" name="avg_salary_data_14" style="width: 120px;" class="form-control input-small" value="" onkeyup="calculateTotal('All', 0)">
                                </td>
                                <td style="width: 80px;">
                                    <input type="text" id="headdeta_0" name="head_count_data_14" class="form-control input-small" style="width: 80px;" value="0" onkeyup="calculateTotal('All', 0)" readonly="">
                                </td>
                                <td style="width: 80px;">
                                    <input type="text" id="morningdeta_0" name="morning_data_14" style="width: 80px;" class="form-control input-small" value="" onkeyup="calculateTotal('All', 0)">
                                </td>
                                <td style="width: 80px;">
                                    <input type="text" id="grnalcount_0" name="general_data_14" style="width: 80px;" class="form-control input-small" value="" onkeyup="calculateTotal('All', 0)">
                                </td>
                                <td style="width: 80px;">
                                    <input type="text" id="Aftercountdeta_0" name="afternoon_data_14" style="width: 80px;" class="form-control input-small" value="" onkeyup="calculateTotal('All', 0)">
                                </td>
                                <td style="width: 80px;">
                                    <input type="text" id="nightdeta_0" name="night_data_14" style="width: 80px;" class="form-control input-small" value="" onkeyup="calculateTotal('All', 0)">
                                </td>
                                <td style="width: 80px;">
                                    <input type="text" id="mbreakgdeta_0" name="m_break_data_14" style="width: 80px;" class="form-control input-small" value="" onkeyup="calculateTotal('All', 0)">
                                </td>
                                <td style="width: 80px;">
                                    <input type="text" id="relieverdeta_0" name="relievers_data_14" style="width: 80px;" class="form-control input-small" value="" onkeyup="calculateTotal('All', 0)">
                                </td>
                                <td style="width: 120px;">
                                    <input type="text" id="total_ctc_0" name="total_ctc_data_14" style="width: 120px;" class="form-control input-small" value="" readonly="">
                                </td>
                            </tr>
                            
    
                        <tr>
                            <td colspan="13"><strong>&nbsp;</strong></td>
                        </tr>
                        <tr>
                            <td colspan="3" style="text-transform: uppercase; width: 320px;"><strong>GRAND TOTAL<strong></strong></strong></td>
                            <td style="width: 70px;">&nbsp;</td>
                            <td><input type="text" id="grandsalarytotal" name="grandsalarytotal" style="width: 120px;  " class="form-control input-small" readonly=""></td>
                            <td><input type="text" id="grandheadtotal" name="grandheadtotal" style="width: 80px;" class="form-control input-small" readonly=""></td>
                            <td><input type="text" id="grandmorningtotal" name="grandmorningtotal" style="width: 80px;" class="form-control input-small" readonly=""></td>
                            <td><input type="text" id="grandgeneraltotal" name="grandgeneraltotal" style="width: 80px;" class="form-control input-small" readonly=""></td>
                            <td><input type="text" id="grandafternoontotal" name="grandafternoontotal" style="width: 80px;" class="form-control input-small" readonly=""></td>
                            <td><input type="text" id="grandnighttotal" name="grandnighttotal" style="width: 80px;" class="form-control input-small" readonly=""></td>
                            <td><input type="text" id="grandmbreaktotal" name="grandmbreaktotal" style="width: 80px;" class="form-control input-small" readonly=""></td>
                            <td><input type="text" id="grandrelieverstotal" name="grandrelieverstotal" style="width: 80px;" class="form-control input-small" readonly=""></td>
                            <td><input type="text" id="grandtotalctc" name="grandtotalctc" style="width: 120px;" class="form-control input-small" readonly=""></td>
                        </tr>
                    </tbody>
                </table>
</div> -->

<style>
    table {
        border-collapse: collapse;
        width: 100%;
        font-size: 14px;
    }
    th, td {
        border: 1px solid rgba(0, 0, 0, 0.295);
        padding: 4px;
        text-align: left;
    }
    th {
        background-color: #f2f2f2;
    }
    .section-title {
        background-color: #edf0fb !important;
        padding: 8px;
        font-weight: bold;
        text-align: center;
    }
    .no-border {
        border: none !important;
    }


/* HeaderReplaced*/
    .input-small {
        /* height: 30px; */
        height: 40px;
        /* text-align: center; */
    }
    .fixedwidth{
        width: 120px !important;
    }

    .Select-Input{
        /* height: 30px; */
        height: 40px;
        padding-inline: 10px;
        padding-block: 0px;
    }
    
    .Period{
        height: 40px;
    }
    .PeriodTd{
        width: 250px;
    }
    .Input-Type1{
        height: 40px;
    }
    .Input-Type1-TD{
        width: 200px;
    }

    .PLPAYMENT tr td{
        width: 300px;
    }

    .PLPAYMENT tr td input, .Section-7 input, .Section-8 input{
       height: 40px;
    }

    .PARTICULAR{
        width: 400px !important;
    } 

    .AMOUNT{
        width: 250px !important;
    } 

</style>

<div class="container">
    <div class="card">
        <div class="card-body">
            <!-- <h2 style="text-align:center;">HOWARD JOHNSON BY WYNDHAM UDAIPUR</h2>-->
            <h3 style="text-align:center;" class="mb-3">FULL AND FINAL SETTLEMENT OF DUES STATEMENT</h3> 
            <table class="custom-table table-striped">
                <tr>
                    <td colspan="1"><label for="employeeName">Employee Name</label></td><td colspan="3"><input type="text" class="form-control input-small" style="width: 250px;" name="Name" id="employeeName"  value="{{ Fobj.Name }}" required readonly> </td>
                    <td  colspan="1"><label for="employeeCode">Employee Code</label></td><td  colspan="3"><input type="text" class="form-control input-small" style="width: 250px;" name="Emp_Code" id="employeeCode"  value="{{ Fobj.Emp_Code }}" required readonly></td>
                </tr>
                <tr>
                    <td colspan="1"><label for="joiningDate">Date of Joining</label></td><td colspan="3"><input type="date" class="form-control input-small" name="DOJ" id="joiningDate" style="width: 250px;" value="{{ Fobj.DOJ|date:'Y-m-d' }}" required readonly></td>
                    <td colspan="1"><label for="LeavingDate">Date of Leaving</label></td><td colspan="3"><input type="date" class="form-control input-small" name="Date_Of_Leaving" id="LeavingDate" style="width: 250px;" value="{{ LastWorkingDaysDate|date:'Y-m-d' }}" required> </td> 
                </tr>
                <tr>
                    <td colspan="1"><label for="department">Department</label></td><td colspan="3"><input type="text" class="form-control input-small" name="Dept" id="department" style="width: 250px;" value="{{ Fobj.Dept }}" required readonly> </td>
                    <td colspan="1"><label for="designation">Designation</label></td><td colspan="3"><input type="text" class="form-control  input-small" name="Designation" style="width: 250px;" id="designation" value="{{ Fobj.Designation }}" required readonly> </td>
                </tr>
                <tr>
                    <td><label for="absconding">Absconding</label></td><td> 
                        <select name="Absconding" id="absconding" class="form-control Select-Input" required>
                            <option value="No" {% if Fobj.Absconding == "No" %}selected{% endif %}>No</option>
                            <option value="Yes" {% if Fobj.Absconding == "Yes" %}selected{% endif %}>Yes</option>
                        </select>
                    </td>
                    <td><label for="resignation">Resignation</label></td>
                    <td>
                        <select name="Resignation" id="resignation" class="form-control  Select-Input" required>
                            <option value="No" {% if Fobj.Resignation == "No" %}selected{% endif %}>No</option>
                            <option value="Yes" {% if Fobj.Resignation == "Yes" %}selected{% endif %}>Yes</option>
                        </select>
                    </td>
                    <td><label for="NoticeDaysServed">Notice Days Served</label></td>
                    <td>
                        <select name="Notice_Days_Served" id="NoticeDaysServed" class="form-control  Select-Input" required>
                            <option value="No" {% if Fobj.Notice_Days_Served == "No" %}selected{% endif %}>No</option>
                            <option value="Yes" {% if Fobj.Notice_Days_Served == "Yes" %}selected{% endif %}>Yes</option>
                        </select>
                    </td>
                    <td><label for="confirmed">Confirmed</label></td>
                    <td>
                        <select name="Confirmed" id="confirmed" class="form-control Select-Input" style="width: 150px;"  required>
                            <option value="No" {% if Fobj.Confirmed == "No" %}selected{% endif %}>No</option>
                            <option value="Yes" {% if Fobj.Confirmed == "Yes" %}selected{% endif %}>Yes</option>
                        </select>
                    </td>
                </tr>
                <!-- try -->
                <tr>
                    <td><label for="terminated">Terminated</label></td><td> 
                        <select name="Terminated" id="terminated" class="form-control Select-Input" required>
                            <option value="No" {% if Fobj.Terminated == "No" %}selected{% endif %}>No</option>
                            <option value="Yes" {% if Fobj.Terminated == "Yes" %}selected{% endif %}>Yes</option>
                        </select>
                    </td>
                    <td><label for="laidOff">Laid Off</label></td>
                    <td>
                        <select name="Laid_Off" id="laidOff" class="form-control  Select-Input" required>
                            <option value="No" {% if Fobj.Laid_Off == "No" %}selected{% endif %}>No</option>
                            <option value="Yes" {% if Fobj.Laid_Off == "Yes" %}selected{% endif %}>Yes</option>
                            <option value="Na" {% if Fobj.Laid_Off == "Na" %}selected{% endif %}>NA</option>
                            <option value="Transfer" {% if Fobj.Laid_Off == "Transfer" %}selected{% endif %}>Transfer</option>
                        </select>
                    </td>
                    <td><label for="deductionFromSalary">Deduction from salary PL</label></td>
                    <td>
                        <select name="Deduction_from_salary_PL" id="deductionFromSalary" class="form-control" required>
                            <option value="No" {% if Fobj.Deduction_from_salary_PL == "No" %}selected{% endif %}>No</option>
                            <option value="Yes" {% if Fobj.Deduction_from_salary_PL == "Yes" %}selected{% endif %}>Yes</option>
                        </select>
                    </td>
                    <td><label for="currentSalary">Current Salary</label></td>
                    <td>
                        <input type="number" class="form-control input-small"  style="width: 150px;" name="Current_Salary" id="currentSalary" value="{{ Fobj.Current_Salary }}" required>
                    </td>
                </tr>

                <!-- try 2-->
                <tr>
                    <td><label for="BasicSalary">Basic Salary</label></td>
                    <td colspan="3">
                        <input type="number" class="form-control input-small" style="width: 200px;" name="PL_Basic_Salary" id="BasicSalary" value="{{ BasicSalary }}" readonly>
                    </td>
                    <td><label for="Gross">Gross Salary</label></td>
                    <td colspan="3">
                        <input type="number" class="form-control input-small" name="NPP_Gross" style="width: 200px;"  id="Gross" value="{{ GrossSalary }}" readonly>
                    </td>
                </tr>
            </table>

            <!-- Section: 2 LEAVE SUMMARY -->
            <br><div class="section-title HeaderWithColor">LEAVE SUMMARY</div>
            <table class="custom-table table-striped">
                <tr>
                    <td class="PeriodTd">Period (<label for="LS_Period">From</label> - <label for="To_Date">To</label>)</td>
                    <td class="Input-Type1-TD"><label for="OpeningBalance">Opening Balance</label></td>
                    <td class="Input-Type1-TD"><label for="leaveEarned">Leave Earned</label></td>
                    <td class="Input-Type1-TD"><label for="leaveAvailed">Leave Availed</label></td>
                    <td class="Input-Type1-TD"><label for="plBal">PL Balance</label></td>
                </tr>
                <tr>
                    <td><input type="date" class="form-control Period" name="LS_Period" id="FromDate" value="{{ DateOfJoining|date:'Y-m-d' }}" ></td>
                    <td>PL</td>
                    <td>PL</td>
                    <td>PL</td>
                    <td>Year End</td>

                </tr>
                <tr>
                    <td><input type="date" class="form-control Period" name="To_Date" id="ToDate" value="{{ LastWorkingDaysDate|date:'Y-m-d' }}"></td>
                    <td><input type="number" class="form-control Input-Type1" name="LS_Opening_Balance" id="OpeningBalance" value="{{ OpeningBalance }}"></td>
                    <td><input type="number" class="form-control" name="LS_Leaved_Earned" id="leaveEarned" value="{{ leave_earned }}"></td>
                    <td><input type="number" class="form-control" name="LS_Leaved_Availed" id="leaveAvailed" value="{{ total_credit }}"></td>
                    <td><input type="number" class="form-control" name="LS_PL_Bal" id="plBal" value="{{ LeaveBalance }}"></td>

                </tr>
            </table>

            <!-- <br><div class="section-title">LEAVE TRAVEL ALLOWANCE</div>
            <table>
                <tr><td>LTA ENTITLEMENT</td><td>Month</td><td>Days</td><td>Amount</td></tr>
                <tr><td>No</td><td colspan="3"></td></tr>
            </table> -->

            <!-- Section: 3 -- PL PAYMENT  -->
            <br><div class="section-title">PL PAYMENT</div>
            <table class="PLPAYMENT custom-table table-striped">
                <tr>
                    <td><label for="TotalPL">Total PL</label></td>
                    <td><label for="BasicSalary">Basic Salary</label></td>
                    <td><label for="PlRate">Rate</label></td>
                    <td><label for="PLAmount">Amount</label></td>
                </tr>
                <tr>
                    <td><input type="number" class="form-control" name="PL_Total_PL" id="TotalPL"  value="{{ OpeningBalance }}"></td>
                    <td><input type="number" class="form-control" name="PL_Basic_Salary" id="BasicSalary" value="{{ BasicSalary }}"></td>
                    <td><input type="number" class="form-control" name="PL_Rate" id="PlRate" value="{{ PLPaymentRateCeil }}"></td>
                    <td><input type="number" class="form-control" name="PL_Amount" id="PLAmount" value="{{ PLPaymentAmount }}"></td>
                </tr>
            </table>

            <!-- Section: 4 -- NOTICE PERIOD PAY -->
            <br><div class="section-title">NOTICE PERIOD PAY</div>
            <table class="PLPAYMENT custom-table table-striped">
                <tr>
                    <td><label for="TotalNoticePayDays">Total Notice Pay Days</label></td>
                    <td><label for="Gross">Gross Salary</label></td>
                    <td><label for="NPPRate">Rate</label></td>
                    <td><label for="NPPAmount">Net Amount Paid</label></td>
                </tr>
                <tr>
                    <td><input type="number" class="form-control" name="NPP_Total_Notice_Pay_Days" id="TotalNoticePayDays" value="{{ NoticePeriodDays }}"> </td>
                    <td><input type="number" class="form-control" name="NPP_Gross" id="Gross" value="{{ GrossSalary }}"></td>
                    <td><input type="number" class="form-control" name="NPP_Rate" id="NPPRate" value="{{ NoticePeriodPayRate }}"></td>
                    <td><input type="number" class="form-control" name="NPP_Net_Amount_Paid" id="NPPAmount" value="{{ NoticePeriodPayAmount }}"></td>
                </tr>
            </table>

            <!--  Section: 5 -- LEAVE TRAVEL ENTITLEMENT -->
            <br><div class="section-title">LEAVE TRAVEL ENTITLEMENT</div>
            <table class="PLPAYMENT custom-table table-striped">
                <tr>
                    <td><label for="TOTALMONTHSWORKED">TOTAL MONTHS WORKED</label></td>
                    <td><label for="LTARATE">LTA RATE</label></td>
                    <td><label for="TOTALDAYSWORKED">TOTAL DAYS WORKED</label></td>
                    <td><label for="PRORATABASISPAYMENT">PRO RATA BASIS PAYMENT</label></td>
                </tr>
                <tr>
                    <td><input type="number" class="form-control" name="TOTALMONTHSWORKED" id="TOTALMONTHSWORKED" value=""></td>
                    <td><input type="number" class="form-control" name="LTARATE" id="LTARATE" value=""></td>
                    <td><input type="number" class="form-control" name="TOTALDAYSWORKED" id="TOTALDAYSWORKED" value=""></td>
                    <td><input type="number" class="form-control" name="PRORATABASISPAYMENT" id="PRORATABASISPAYMENT" value=""></td>
                </tr>
            </table>

            <!--  Section: 6 -- GRATUITY PAYMENT -->
            <br><div class="section-title">GRATUITY PAYMENT</div>
            <table class="PLPAYMENT custom-table table-striped">
                <tr>
                    <td><label for="NoOfYears">No Of Years</label></td>
                    <td><label for="LastBasics">Last Basics</label></td>
                    <td><label for="GraturityDaysPeryear">Graturity Days / Per year</label></td>
                    <td><label for="GraturityPayments">Graturity Payments</label></td>
                </tr>
                <tr>
                    <td><input type="number" class="form-control" name="GP_No_Of_Years" id="NoOfYears" value="{{ TenureYears }}"></td>
                    <td><input type="number" class="form-control" name="GP_Last_Basics" id="LastBasics" value="{{ BasicSalary }}"></td>
                    <td><input type="number" class="form-control" name="GraturityDaysPeryear" id="GraturityDaysPeryear" value=""></td>
                    <td><input type="number" class="form-control" name="GP_Graturity_Payments" id="GraturityPayments" value="{{ GraturityPayments }}"></td>
                </tr>
            </table>

            <!--  Section: 7 -- GRATUITY PAYMENT -->
            <br><div class="section-title">Bank Details</div>
            <table class="PLPAYMENT custom-table table-striped">
                <tr>
                    <td><label for="BankName">Bank Name</label></td>
                    <td><label for="BranchName">Branch Name</label></td>
                    <td><label for="AccountsNumber">Accounts Number</label></td>
                    <td><label for="IFSCCode">IFSC Code</label></td>
                </tr>
                <tr>
                    <td><input type="text" class="form-control" name="BankName" id="BankName" value="{{BankName}}" ></td>
                    <td><input type="text" class="form-control" name="BranchName" id="BranchName" value="{{BankBranch}}"></td>
                    <td><input type="text" class="form-control" name="AccountsNumber" id="AccountsNumber" value="{{BankAccountNumber}}"></td>
                    <td><input type="text" class="form-control" name="IFSCCode" id="IFSCCode" value="{{BankIFSCCode}}"></td>
                </tr>
            </table>

            <!--  Section: 8 -- FULL AND FINAL PAYMENT SUMMARY -->
            <br><div class="section-title">FULL AND FINAL PAYMENT SUMMARY</div>
            <table class="custom-table table-striped">
                <tr>
                    <td colspan="1" class="text-center PARTICULAR"><b>PARTICULAR</b></td>
                    <td colspan="1" class="text-center AMOUNT"><b>AMOUNT</b></td>
                    <td colspan="3" class="text-center"><b>REMARKS</b></td>
                </tr>

                <!-- Earnings -->
                <tr>
                    <td colspan="1" class="fw-bolder text-center">Earnings</td>
                    <td colspan="1">&nbsp;</td>
                    <td colspan="3">&nbsp;</td>
                </tr>
                <tr>
                    <td colspan="1"><label for="LTA">LTA</label></td>
                    <td colspan="1"><input type="number" class="form-control" name="LTA" id="LTA"> </td>
                    <td colspan="3"><input type="text" class="form-control" name="LTARemarks" id="LTARemarks" title="Remarks For LTA" placeholder="Enter Remarks For LTA"></td>
                </tr>
                <tr>
                    <td colspan="1"><label for="PL">PL Payment</label></td>
                    <td colspan="1"><input type="number" class="form-control" name="FFPS_PL" id="PL" value="{{ PLPaymentAmount }}"></td>
                    <td colspan="3"><input type="text" class="form-control" name="PLPaymentRemarks" id="PLPaymentRemarks" placeholder="Remarks For PL Payment"></td>
                </tr>
                <tr>
                    <td colspan="1"><label for="OtherEarnings">Other Earnings</label></td>
                    <td colspan="1"><input type="number" class="form-control" name="OtherEarnings" id="OtherEarnings" value=""></td>
                    <td colspan="3"><input type="text" class="form-control" name="OtherEarningsRemarks" id="OtherEarningsRemarks" placeholder="Remarks For Other Earnings"></td>
                </tr>
                <tr>
                    <td colspan="1" class="fw-bold fst-italic"><label for="TOTALEARNING">TOTAL EARNING</label></td>
                    <td colspan="1" class="fw-bold"><input type="number" class="form-control" name="TOTALEARNING" id="TOTALEARNING" value="{{ TOTALEARNINGAmount }}"></td>
                    <td colspan="3"><input type="text" class="form-control" name="TOTALEARNINGRemarks" id="TOTALEARNINGRemarks" placeholder="Remarks For TOTAL EARNING"></td>
                </tr>

                <!-- DEDUCTION -->
                <tr>
                    <td colspan="1" class="fw-bolder text-center">DEDUCTION</td>
                    <td colspan="1">&nbsp;</td>
                    <td colspan="3">&nbsp;</td>
                </tr>
                <tr>
                    <td colspan="1"><label for="UniformDeductions">Uniform Deductions</label></td>
                    <td colspan="1"><input type="number" class="form-control" name="FFPS_Uniform_Deductions" id="UniformDeductions" value="{{ UniformDeductions }}"></td>
                    <td colspan="2"><input type="text" class="form-control" name="UniformDeductionsRemarks" id="UniformDeductionsRemarks" placeholder="Remarks For Uniform Deductions"> </td>
                </tr>
                <tr>
                    <td colspan="1"><label for="OtherDeductions">Other Deductions</label></td>
                    <td colspan="1"><input type="number" class="form-control" name="OtherDeductions" id="OtherDeductions" value=""></td>
                    <td colspan="2"><input type="text" class="form-control" name="DeductionsRemarks" id="DeductionsRemarks" placeholder="Remarks For Deductions"></td>
                </tr>
                <tr>
                    <td colspan="1"><label for="NOTICEPERIODDeductions">Notice Period</label></td>
                    <td colspan="1"><input type="number" class="form-control" name="NOTICEPERIODDeductions" id="NOTICEPERIODDeductions" value="{{ NoticePeriodPayAmount}}"></td>
                    <td colspan="3"><input type="text" class="form-control" name="NOTICEPERIODDeductionsRemarks" id="NOTICEPERIODDeductionsRemarks" placeholder="Remarks For Notice Period"> </td>
                </tr>
                <tr>
                    <td colspan="1"><label for="PendingSalary">Pending Salary</label></td>
                    <td colspan="1"><input type="number" class="form-control" name="FFPS_Pending_Salary" id="PendingSalary" value="{{ Fobj.FFPS_Pending_Salary }}"> </td>
                    <td colspan="3"><input type="text" class="form-control" name="PendingSalaryRemarks" id="PendingSalaryRemarks" placeholder="Remarks For Pending Salary"> </td>
                </tr>
                <tr>
                    <td colspan="1" class="fw-bold fst-italic"><label for="TotalDeductionsRemarks">Remarks</label></td>
                    <td colspan="1" class="fw-bold"><input type="number" class="form-control" name="TotalDeductions" id="TotalDeductions" value="{{TotalDeductions}}"> </td>
                    <td colspan="3"><input type="text" class="form-control" name="TotalDeductionsRemarks" id="TotalDeductionsRemarks" placeholder="Remarks For Total Deductions"></td>
                </tr>
                <tr>
                    <td colspan="1" class="fw-bold fst-italic"><label for="PayableAmount">Payable Amount</label></td>
                    <td colspan="1" class="fw-bold"><input type="number" class="form-control" name="FFPS_Payable_Amount" id="PayableAmount" value="{{ PayableAmount }}"></td>
                    <td colspan="3"><input type="text" class="form-control" name="PayableAmountRemarks" id="PayableAmountRemarks" placeholder="Remarks For Payable Amount"> </td>
                </tr>
                <!-- <tr>
                    <td colspan="2">Total Earnings:  5,712</td>
                    <td colspan="2">Total Deductions:  0</td>
                    <td colspan="2">Total Deductions:  0</td>
                </tr> -->
            </table>

            <br>
            <table class="custom-table table-striped">
                <tr>
                    <td colspan="1" class="text-center PARTICULAR fs-5"><b><label for="FinalPayableAmount">Final Payable Amount</label></b></td>
                    <td colspan="1" class="text-center AMOUNT"><b><input type="number" class="form-control" name="FFPS_Payable_Amount" id="PayableAmount" value="{{ FinalPayableAmount }}"></b></td>
                    <td colspan="1" class="text-center"></td>
                </tr>
            </table>

            <!-- <br>
            <br>
            <br>
            <br> -->
            <!--  Section: 8 -- FULL AND FINAL PAYMENT SUMMARY -->
            <!-- <table class="custom-table table-striped Section-8">
                <tr>
                    <td><label for="PreparedBy">Prepared By</label></td>
                    <td><label for="CheckedBy">Checked By</label></td>
                    <td><label for="ApprovedBy">Approved By</label></td>
                </tr>
                <tr>
                    <td><input type="text" class="form-control" name="PreparedBy" id="PreparedBy" value="" ></td>
                    <td><input type="text" class="form-control" name="CheckedBy" id="CheckedBy" value="" ></td>
                    <td><input type="text" class="form-control" name="ApprovedBy" id="ApprovedBy" value="" ></td>
                </tr>
                <tr>
                    <td><input type="text" class="form-control" id="PreparedByDesignations" value="" ></td>
                    <td><input type="text" class="form-control" id="CheckedByDesignations" value="" ></td>
                    <td><input type="text" class="form-control" id="ApprovedByDesignations" value="" ></td>
                </tr>
                <tr>
                    <td colspan="3">1. I understand to maintain absolute secrecy herebafter with regards to the company's business operations and all such</td>
                </tr>
                <tr>
                    <td colspan="3">2. I received all my dues from the company in full & final settlement and I have no further claims against the company.</td>
                </tr>
                <tr>
                    <td>Name: <input type="text" class="form-control" id="PreparedByDesignations" value="" ></td>
                    <td>Date : <input type="date" class="form-control" id="CheckedByDesignations" value="" ></td>
                    <td>Signature : </td>
                </tr>
            </table> -->
        </div>
    </div>
</div>

<script>
    const absconding = document.getElementById("absconding");
    const resignation = document.getElementById("resignation");
    const form = document.getElementById("FullandFinalSettlement");

    function toggleFormFieldsBasedOnAbsconding() {

        if (absconding.value === "Yes") {
            // Disable all inputs except absconding itself
            Array.from(form.elements).forEach(el => {
                if (el.id !== "absconding") {
                    el.disabled = true;
                }
            });
        } else {
            // Re-enable inputs if not Yes
            Array.from(form.elements).forEach(el => {
                el.disabled = false;
            });
        }
    }

    function toggleFormFieldsBasedOnResignation() {
        if (resignation.value === "Yes") {
            // Disable all inputs except absconding itself
            absconding.disabled = true
        } else {
            // Re-enable inputs if not Yes
            absconding.disabled = false
        }
    }

    // Run on page load
    document.addEventListener("DOMContentLoaded", toggleFormFieldsBasedOnAbsconding);
    document.addEventListener("DOMContentLoaded", toggleFormFieldsBasedOnResignation);

    // Run when absconding value changes
    document.getElementById("absconding").addEventListener("change", toggleFormFieldsBasedOnAbsconding);
    document.getElementById("resignation").addEventListener("change", toggleFormFieldsBasedOnResignation);
</script>

        
<!-- <script>
    FromDate = document.querySelector('#period').value
    console.log("From date", FromDate)
</script> -->
<!-- <script>
    document.addEventListener("DOMContentLoaded", function () {
        const fromDateInput = document.getElementById("FromDate");
        const toDateInput = document.getElementById("ToDate");

        function updateToDate() {
            const fromDateValue = fromDateInput.value;
            if (!fromDateValue) return;

            const fromDate = new Date(fromDateValue);
            fromDate.setDate(fromDate.getDate() + 365);

            const yyyy = fromDate.getFullYear();
            const mm = String(fromDate.getMonth() + 1).padStart(2, '0');
            const dd = String(fromDate.getDate()).padStart(2, '0');

            toDateInput.value = `${yyyy}-${mm}-${dd}`;
        }

        // Auto-update on load
        updateToDate();

        // Auto-update on change
        fromDateInput.addEventListener("change", updateToDate);
    });
</script> -->

{% comment %} <script>
    document.addEventListener("DOMContentLoaded", function () {
    const fromDateInput = document.getElementById("FromDate");
    const toDateInput = document.getElementById("ToDate");

    function updateToDate() {
        if (!fromDateInput || !toDateInput) return;  // Safety check

        const fromDateValue = fromDateInput.value;
        if (!fromDateValue) return;

        const fromDate = new Date(fromDateValue);
        fromDate.setDate(fromDate.getDate() + 365);

        const yyyy = fromDate.getFullYear();
        const mm = String(fromDate.getMonth() + 1).padStart(2, '0');
        const dd = String(fromDate.getDate()).padStart(2, '0');

        toDateInput.value = `${yyyy}-${mm}-${dd}`;
    }

    updateToDate();

    fromDateInput.addEventListener("change", updateToDate);
});
</script> {% endcomment %}

{% comment %} <script>
    document.addEventListener("DOMContentLoaded", function () {
        const fromDateInput = document.getElementById("FromDate");
        const toDateInput = document.getElementById("ToDate");
        const leaveEarnedInput = document.getElementById("leaveEarned");

        function updateToDateAndLeave() {
            const fromDateValue = fromDateInput.value;
            if (!fromDateValue) return;

            // Auto-calculate ToDate as +365 days from FromDate
            const fromDate = new Date(fromDateValue);
            const autoToDate = new Date(fromDate);
            autoToDate.setDate(autoToDate.getDate() + 365);

            const yyyy = autoToDate.getFullYear();
            const mm = String(autoToDate.getMonth() + 1).padStart(2, '0');
            const dd = String(autoToDate.getDate()).padStart(2, '0');
            toDateInput.value = `${yyyy}-${mm}-${dd}`;

            // Also update LeaveEarned based on 12 months
            leaveEarnedInput.value = (12 * 1.75).toFixed(2);
        }

        function calculateLeaveEarned() {
            const fromDateValue = fromDateInput.value;
            const toDateValue = toDateInput.value;

            if (!fromDateValue || !toDateValue) return;

            const fromDate = new Date(fromDateValue);
            const toDate = new Date(toDateValue);

            const yearDiff = toDate.getFullYear() - fromDate.getFullYear();
            const monthDiff = (yearDiff * 12) + (toDate.getMonth() - fromDate.getMonth());

            // If To Date's day is less than From Date's day, reduce by 1 month (approximate)
            if (toDate.getDate() < fromDate.getDate()) {
                monthDiff -= 1;
            }

            const leaveEarned = Math.max(0, monthDiff * 1.75);
            leaveEarnedInput.value = leaveEarned.toFixed(2);
        }

        // Initial setup
        updateToDateAndLeave();

        // Update ToDate automatically on FromDate change
        fromDateInput.addEventListener("change", () => {
            updateToDateAndLeave();
            calculateLeaveEarned();
        });

        // Update LeaveEarned on either date change
        toDateInput.addEventListener("change", calculateLeaveEarned);
    });
</script> {% endcomment %}

<!-- <script>
    document.addEventListener("DOMContentLoaded", function () {
        const fromDateInput = document.getElementById("FromDate");
        const toDateInput = document.getElementById("ToDate");
        const leaveEarnedInput = document.getElementById("leaveEarned");
        const leaveAvailedInput = document.getElementById("leaveAvailed");
        const plBalanceInput = document.getElementById("plBal"); // Ensure ID is used only once
        const openingBalanceInput = document.getElementById("OpeningBalance");
        const PLBasicSalary = document.getElementById("BasicSalary");
        const PlRate = document.getElementById("PlRate");
        const TotalPLInput = document.getElementById("TotalPL");
        const PLAmountInput = document.getElementById("PLAmount");
        const TotalNoticePayDaysInput = document.getElementById("TotalNoticePayDays");
        const NoticePeriodRateInput = document.getElementById("NPPRate");
        const NoticePeriodAmountInput = document.getElementById("NPPAmount");
        const GrossSalaryInput = document.getElementById("Gross");

        function updateToDateAndLeave() {
            const fromDateValue = fromDateInput.value;
            if (!fromDateValue) return;

            const fromDate = new Date(fromDateValue);
            const autoToDate = new Date(fromDate);
            autoToDate.setDate(autoToDate.getDate() + 365);

            const yyyy = autoToDate.getFullYear();
            const mm = String(autoToDate.getMonth() + 1).padStart(2, '0');
            const dd = String(autoToDate.getDate()).padStart(2, '0');
            toDateInput.value = `${yyyy}-${mm}-${dd}`;

            leaveEarnedInput.value = (12 * 1.75).toFixed(2);
            calculateOpeningBalance();
        }

        function calculateLeaveEarned() {
            const fromDateValue = fromDateInput.value;
            const toDateValue = toDateInput.value;

            if (!fromDateValue || !toDateValue) return;

            const fromDate = new Date(fromDateValue);
            const toDate = new Date(toDateValue);

            let monthDiff = (toDate.getFullYear() - fromDate.getFullYear()) * 12 +
                            (toDate.getMonth() - fromDate.getMonth());

            if (toDate.getDate() < fromDate.getDate()) {
                monthDiff -= 1;
            }

            const leaveEarned = Math.max(0, monthDiff * 1.75);
            leaveEarnedInput.value = leaveEarned.toFixed(2);
            calculateOpeningBalance();
        }

        function calculateOpeningBalance() {
            const earned = parseFloat(leaveEarnedInput.value) || 0;
            const availed = parseFloat(leaveAvailedInput.value) || 0;
            const plBalance = parseFloat(plBalanceInput.value) || 0;

            const openingBalance = plBalance - (earned - availed);
            // const openingBalance = (earned - availed) + plBalance;
            openingBalanceInput.value = openingBalance.toFixed(2);
        }


        // Listeners
        fromDateInput.addEventListener("change", () => {
            updateToDateAndLeave();
            calculateLeaveEarned();
        });

        // NOTICE PERIOD PAY
        function calculateNoticePeriodPay() {
            const TotalNoticePayDaysValue = parseFloat(TotalNoticePayDaysInput.value) || 0;
            const GrossValue = parseFloat(GrossSalaryInput.value) || 0;
            const NoticePeriodRate = (GrossValue * 12) / 365;

            
            const NoticePeriodAmount = (NoticePeriodRate * TotalNoticePayDaysValue);

            NoticePeriodRateInput.value = NoticePeriodRate.toFixed(2);
            NoticePeriodAmountInput.value = NoticePeriodAmount.toFixed(2);
        }

        // function calculatePLBasicSalary() {
        //     const basicSalary = parseFloat(PLBasicSalary.value) || 0;
        //     const PLBasicSalaryBalance = (basicSalary * 12) / 365;

        //     PlRateValue = PLBasicSalaryBalance.toFixed(2);
        //     PlRateValueFixed = (Math.ceil(PlRateValue * 100) / 100).toFixed(2);
        //     PlRate.value = PlRateValueFixed;
        // }

        function calculatePLBasicSalary() {
            const basicSalary = parseFloat(PLBasicSalary.value) || 0;
            const PLBasicSalaryBalance = (basicSalary * 12) / 365;

            // Apply Math.ceil to the raw number BEFORE converting to string
            const PlRateValueFixed = (Math.ceil(PLBasicSalaryBalance * 100) / 100).toFixed(2);
            
            PlRate.value = PlRateValueFixed;
        }


        function calculatePLAmount() {
            const rate = parseFloat(PlRate.value) || 0;
            const totalPL = parseFloat(TotalPLInput.value) || 0;
            const amount = rate * totalPL;
            PLAmountInput.value = amount.toFixed(2);

            // PLAmountInput.value = amount.toFixed(2);
        }

        toDateInput.addEventListener("change", calculateLeaveEarned);
        leaveEarnedInput.addEventListener("input", calculateOpeningBalance);
        leaveAvailedInput.addEventListener("input", calculateOpeningBalance);
        plBalanceInput.addEventListener("input", calculateOpeningBalance);
        PLBasicSalary.addEventListener("input", calculatePLBasicSalary);
        PlRate.addEventListener("input", calculatePLAmount);
        TotalPLInput.addEventListener("input", calculatePLAmount);

        GrossSalaryInput.addEventListener("input", calculateNoticePeriodPay);




        // Initial setup
        updateToDateAndLeave();
        calculateLeaveEarned();
        calculatePLBasicSalary(); // on DOM load
        calculatePLAmount();
        calculateNoticePeriodPay();
    });
</script> -->

{% endblock content %}
